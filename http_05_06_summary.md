# Chapter 5 & 6. 웹 서버 & 게이트웨이

## 웹 서버가 정적 콘텐츠를 응답하는 방법

### 웹 서버
- 웹 서버 소프트웨어와 장비 모두를 가리킴
- 클라이언트로부터 리소스에 대한 HTTP 요청을 받아서 클라이언트에게 돌려줌
- HTTP와 관련된 TCP커넥션 처리
- 아파치, Nginx
- 동작
    - 커넥션 맺기
    - 요청 받기
    - 요청 처리하기
    - 리소스 접근하기
    - 응답 만들기
    - 응답 보내기
    - 트랜잭션 로깅

## 웹 서버가 클라이언트의 요청에 따라 데이터를 처리하고 동적 콘텐츠를 응답하는 방법 - 게이트 웨이

### 웹 애플리케이션
- 웹 브라우저에서 이용할 수 있는 응용 소프트웨어(애플리케이션)
- 어떻게 웹 브라우저에서 애플리케이션를 이용할까?
- 클라이언트의 HTTP 요청을 애플리케이션에 전달하고 그 처리 결과을 HTTP 응답으로 만들어 클라이언트에 전달하는 매개체가 필요하다

### 게이트웨이

- 네트워크 상에서 클라이언트와 서버를 연결하거나(프로토콜/보안 게이트웨이) 혹은 서버에 포함될 수도 있음(리소스 게이트웨이)
1. 프로토콜 게이트웨이
    - 예) 클라이언트로부터 HTTP 요청받아서 FTP 서버에 FTP 요청으로 전달
    - FTP 응답 받아서 클라이언트에 HTTP 로 전달
    - (서버측 게이트웨이)
2. 보안 게이트웨이
    - 클라이언트로부터 HTTPS 요청 받아서 HTTP 서버에 HTTP 요청으로 전달
    - HTTP 응답받아서 클라이언트에 HTTPS로 전달
    - (클라이언트측 게이트웨이)
    - 역방향은 서버측 게이트웨이라고도 할 수 있음
3. **리소스 게이트웨이**
    - 클라이언트로부터 HTTP 요청받아서 서버측 애플리케이션에 API 통해 전달
    - 애플리케이션 응답 받아서 클라이언트에 HTTP 로 전달
    - (서버 측 게이트웨이)
    - 애플리케이션 서버
        - 목적지 서버와 게이트웨이를 한개의 서버로 결합 = 서버의 확장
        - HTTP를 통해서 클라이언트와 통신하고 + (서버 측) 애플리케이션 프로그램에 연결
        - 리소스 게이트웨이, 애플리케이션 게이트웨이라고도 함
        - 동작
            - 클라이언트의 HTTP 요청 받음
            - 리소스 게이트웨이의 API를 통해서 이 요청을 (서버에서 동작하고 있는) 애플리케이션에 전달
            - 애플리케이션으로부터 메시지 수신
            - 이를 HTTP 응답으로 감싸서 클라이언트로 응답함
        - **공용 게이트웨이 인터페이스(CGI)**
            - 애플리케이션 게이트웨이의 API 중 최초이자 가장 유명함
                - 특정 URL에 대한 HTTP 요청에 따라
                - 프로그램을 실행하고 그 출력을 수집하고 HTTP응답으로 회신하기 위해
                - 웹 서버가 사용하는 표준화된 인터페이스 집합
            - C, C++로 구현 -> 플랫폼 종속적, portabiliry(이식성) 낮음
            - 요청 하나 당 프로세스 하나 생성하여 요청 처리함

### cf. 서블릿(인터페이스) (←→ CGI)

- Java -> 플랫폼 독립적, portabiliry(이식성) 높음
- 요청 하나 당 스레드 하나 생성하여 처리
- 서블릿 컨테이너
    - 서블릿(구현체)의 생명주기를 관리하는 역할
    - 웹 애플리케이션 서버의 역할(구성요소) 중 하나
    - 웹 컨테이너를 가진 웹 서버를 웹 애플리케이션 서버라고 한다?

### cf. 스프링 웹 MVC

- **서블릿을 사용하는** 스프링 프레임워크의 웹 서비스 개발용 모듈
